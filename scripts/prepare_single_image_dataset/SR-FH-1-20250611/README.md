# é£é™©æ•°æ®é›†å‡†å¤‡è„šæœ¬

RisKVA é¡¹ç›®çš„æ•°æ®é¢„å¤„ç†å·¥å…·ï¼Œç”¨äºå°† Excel æ–‡ä»¶è½¬æ¢ä¸ºæ ‡å‡†çš„æœºå™¨å­¦ä¹ æ•°æ®é›†ï¼ŒåŒæ—¶ä»Excelä¸­æå–æ–‡æœ¬æ•°æ®å’Œå›¾ç‰‡ã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

```
prepare_risk_dataset/
â”œâ”€â”€ create_dataset_from_files.py  # ğŸŒŸ ä¸»è„šæœ¬ - ä¸€é”®ç”Ÿæˆæ•°æ®é›†
â”œâ”€â”€ get_text_image.py             # Excelæ–‡ä»¶è½¬æ¢æ¨¡å—ï¼ˆæå–æ–‡æœ¬å’Œå›¾ç‰‡ï¼‰
â”œâ”€â”€ get_datasets.py               # æ•°æ®é›†æ•´ç†å’Œæ ¼å¼åŒ–
â”œâ”€â”€ validate_dataset.py           # æ•°æ®é›†éªŒè¯å·¥å…·
â”œâ”€â”€ load_dataset.py               # ç®€æ´çš„æ•°æ®é›†åŠ è½½å™¨
â”œâ”€â”€ example_usage.py              # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ input/                        # è¾“å…¥æ–‡ä»¶ç›®å½•
â””â”€â”€ dataset/                      # è¾“å‡ºæ•°æ®é›†ç›®å½•
```

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### åŸºæœ¬ç”¨æ³•
```bash
# è¿›å…¥è„šæœ¬ç›®å½•
cd scripts/prepare_risk_dataset

# å°†Excelæ–‡ä»¶æ”¾å…¥input/ç›®å½•

# è¿è¡Œè½¬æ¢
python create_dataset_from_files.py

# éªŒè¯ç»“æœ
python validate_dataset.py dataset/
```

### è‡ªå®šä¹‰é€‰é¡¹
```bash
# è‡ªå®šä¹‰è·¯å¾„
python create_dataset_from_files.py -i ./my_input -o ./my_output

# é¢„è§ˆæ¨¡å¼ï¼ˆä¸ç”Ÿæˆæœ€ç»ˆæ•°æ®é›†ï¼‰
python create_dataset_from_files.py --preview

# ä¿ç•™ä¸´æ—¶æ–‡ä»¶ç”¨äºè°ƒè¯•
python create_dataset_from_files.py --keep-temp
```

### åˆ†æ‹†ä½¿ç”¨

å¦‚æœéœ€è¦åˆ†æ­¥éª¤å¤„ç†æˆ–å•ç‹¬ä½¿ç”¨æŸä¸ªåŠŸèƒ½æ¨¡å—ï¼š

#### 1. æ–‡ä»¶è½¬æ¢æ¨¡å— (get_text_image.py)
```bash
# å¤„ç†å½“å‰ç›®å½•çš„inputæ–‡ä»¶å¤¹
python get_text_image.py

# è‡ªå®šä¹‰è¾“å…¥è¾“å‡ºè·¯å¾„
python get_text_image.py -i ./åŸå§‹æ–‡ä»¶ç›®å½• -o ./è¾“å‡ºç›®å½•

# è‡ªå®šä¹‰CSVå’Œå›¾ç‰‡è¾“å‡ºè·¯å¾„
python get_text_image.py --csv-dir ./csvè¾“å‡º --images-dir ./å›¾ç‰‡è¾“å‡º
```

åŠŸèƒ½ï¼š
- Excelæ–‡ä»¶ (.xlsx) â†’ CSVæ–‡ä»¶ (æå–ç»“æ„åŒ–æ–‡æœ¬æ•°æ®)  
- Excelæ–‡ä»¶ (.xlsx) â†’ å›¾ç‰‡æ–‡ä»¶ (ä»Excelä¸­æå–æ‰€æœ‰å›¾ç‰‡)

#### 2. æ•°æ®é›†æ•´ç†æ¨¡å— (get_datasets.py)  
```bash
# æ•´ç†CSVå’Œå›¾ç‰‡ä¸ºæ ‡å‡†æ•°æ®é›†æ ¼å¼
python get_datasets.py -c ./csvç›®å½• -i ./å›¾ç‰‡ç›®å½• -o ./æ•°æ®é›†è¾“å‡º
```

åŠŸèƒ½ï¼š
- åŒ¹é…CSVæ•°æ®ä¸å¯¹åº”å›¾ç‰‡
- ç”Ÿæˆç¬¦åˆæœºå™¨å­¦ä¹ æ¡†æ¶çš„æ•°æ®é›†æ ¼å¼
- åˆ›å»ºå…ƒæ•°æ®æ–‡ä»¶å’Œæ•°æ®é›†è¯´æ˜

#### 3. å®Œæ•´æµæ°´çº¿ (create_dataset_from_files.py)
ç»„åˆä»¥ä¸Šä¸¤ä¸ªæ­¥éª¤çš„è‡ªåŠ¨åŒ–å¤„ç†ï¼š
```bash
python create_dataset_from_files.py -i ./input -o ./dataset
```

#### ä½¿ç”¨åœºæ™¯å»ºè®®
- **ä»…éœ€è¦æ–‡ä»¶è½¬æ¢**ï¼šä½¿ç”¨ `get_text_image.py`ï¼Œé€‚åˆåªéœ€è¦æå–æ•°æ®æˆ–å›¾ç‰‡çš„åœºæ™¯
- **å·²æœ‰è½¬æ¢ç»“æœ**ï¼šç›´æ¥ä½¿ç”¨ `get_datasets.py` æ•´ç†ç°æœ‰çš„CSVå’Œå›¾ç‰‡æ–‡ä»¶  
- **ä¸€é”®å¼å¤„ç†**ï¼šä½¿ç”¨ `create_dataset_from_files.py`ï¼Œé€‚åˆå®Œæ•´çš„æ•°æ®é›†åˆ¶ä½œæµç¨‹
- **è°ƒè¯•æˆ–å®šåˆ¶**ï¼šåˆ†æ­¥éª¤ä½¿ç”¨å„æ¨¡å—ï¼Œä¾¿äºä¸­é—´ç»“æœæ£€æŸ¥å’Œå‚æ•°è°ƒæ•´

## ğŸ“‹ è¾“å…¥è¦æ±‚

- PDF æ–‡ä»¶æ ¼å¼

- Excel æ–‡ä»¶æ ¼å¼ï¼ˆç”± PDF æ–‡ä»¶è½¬æ¢å¾—åˆ°ï¼‰

## ğŸ“Š è¾“å‡ºæ ¼å¼

ç”Ÿæˆç¬¦åˆ Hugging Face æ ‡å‡†çš„æ•°æ®é›†ï¼š
```
dataset/
â”œâ”€â”€ metadata.csv        # å…ƒæ•°æ®æ–‡ä»¶
â”œâ”€â”€ images/            # å›¾ç‰‡ç›®å½•
â”œâ”€â”€ dataset_info.json # æ•°æ®é›†ä¿¡æ¯
â””â”€â”€ README.md          # æ•°æ®é›†è¯´æ˜
```

## ğŸ”§ è„šæœ¬åŠŸèƒ½

- **`create_dataset_from_files.py`**: å®Œæ•´çš„è½¬æ¢æµç¨‹ï¼Œä»åŸå§‹æ–‡ä»¶åˆ°æ•°æ®é›†
- **`get_text_image.py`**: æ–‡ä»¶è½¬æ¢åŠŸèƒ½ï¼ŒExcelâ†’CSVå’Œå›¾ç‰‡æå–
- **`get_datasets.py`**: æ•°æ®é›†æ•´ç†ï¼Œå›¾ç‰‡ä¸æ–‡æœ¬æ•°æ®åŒ¹é…
- **`validate_dataset.py`**: éªŒè¯ç”Ÿæˆæ•°æ®é›†çš„å®Œæ•´æ€§
- **`load_dataset.py`**: å¿«é€ŸåŠ è½½æ•°æ®é›†æ ·æœ¬ï¼Œè¿”å›PILå›¾ç‰‡å’Œå…³é”®å­—æ®µ
- **`example_usage.py`**: å„ç§æ¡†æ¶çš„ä½¿ç”¨ç¤ºä¾‹